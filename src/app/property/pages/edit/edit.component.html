<div class="mt-5 font-roboto">
    <div class="text-center py-6">
        <h1 class="text-3xl md:text-5xl font-bold">Editar Propiedad</h1>
        <p class="text-sm md:text-base">Modifica los datos de la propiedad</p>
    </div>
  
    <form [formGroup]="propertyForm" (ngSubmit)="onSubmit()" class="w-[90%] mx-auto mb-8 font-roboto">
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
            
            <!-- name -->
            <div class="flex flex-col gap-1">
                <input type="text" 
                       formControlName="name" 
                       placeholder="Nombre" 
                       class="w-full px-3 py-2 border border-blue-900 rounded-lg text-sm md:text-base outline-none" />
                <span *ngIf="propertyForm.get('name')?.invalid && (propertyForm.get('name')?.dirty || propertyForm.get('name')?.touched)" 
                      class="text-red-500 text-sm">
                    <span *ngIf="propertyForm.get('name')?.errors?.['required']">
                        El nombre es requerido.
                    </span>
                </span>
            </div>
  
            <!-- area -->
            <div class="flex flex-col gap-1">
                <input type="number" 
                       formControlName="area" 
                       placeholder="Área" 
                       class="w-full px-3 py-2 border border-blue-900 rounded-lg text-sm md:text-base outline-none" 
                       min="0"/>
                <span *ngIf="propertyForm.get('area')?.invalid && (propertyForm.get('area')?.dirty || propertyForm.get('area')?.touched)" 
                      class="text-red-500 text-sm">
                    <span *ngIf="propertyForm.get('area')?.errors?.['required']">
                        El área es requerida.
                    </span>
                </span>
            </div>
  
            <!-- price -->
            <div class="flex flex-col gap-1">
                <input type="number" 
                       formControlName="price" 
                       placeholder="Precio" 
                       class="w-full px-3 py-2 border border-blue-900 rounded-lg text-sm md:text-base outline-none" 
                       min="0"/>
                <span *ngIf="propertyForm.get('price')?.invalid && (propertyForm.get('price')?.dirty || propertyForm.get('price')?.touched)" 
                      class="text-red-500 text-sm">
                    <span *ngIf="propertyForm.get('price')?.errors?.['required']">
                        El precio es requerido.
                    </span>
                </span>
            </div>
  
            <!-- address -->
            <div class="flex flex-col gap-1">
                <input type="text" 
                       formControlName="address" 
                       placeholder="Dirección" 
                       class="w-full px-3 py-2 border border-blue-900 rounded-lg text-sm md:text-base outline-none" />
                <span *ngIf="propertyForm.get('address')?.invalid && (propertyForm.get('address')?.dirty || propertyForm.get('address')?.touched)" 
                      class="text-red-500 text-sm">
                    <span *ngIf="propertyForm.get('address')?.errors?.['required']">
                        La dirección es requerida.
                    </span>
                </span>
            </div>
  
            <!-- latitude -->
            <div class="flex flex-col gap-1">
                <input type="number" 
                       formControlName="latitude" 
                       placeholder="Latitud" 
                       class="w-full px-3 py-2 border border-blue-900 rounded-lg text-sm md:text-base outline-none" />
                <span *ngIf="propertyForm.get('latitude')?.invalid && (propertyForm.get('latitude')?.dirty || propertyForm.get('latitude')?.touched)" 
                      class="text-red-500 text-sm">
                    <span *ngIf="propertyForm.get('latitude')?.errors?.['required']">
                        La latitud es requerida.
                    </span>
                    <span *ngIf="propertyForm.get('latitude')?.errors?.['pattern']">
                        Formato de latitud inválido.
                    </span>
                </span>
            </div>
  
            <!-- longitude -->
            <div class="flex flex-col gap-1">
                <input type="number" 
                       formControlName="longitude" 
                       placeholder="Longitud" 
                       class="w-full px-3 py-2 border border-blue-900 rounded-lg text-sm md:text-base outline-none" />
                <span *ngIf="propertyForm.get('longitude')?.invalid && (propertyForm.get('longitude')?.dirty || propertyForm.get('longitude')?.touched)" 
                      class="text-red-500 text-sm">
                    <span *ngIf="propertyForm.get('longitude')?.errors?.['required']">
                        La longitud es requerida.
                    </span>
                    <span *ngIf="propertyForm.get('longitude')?.errors?.['pattern']">
                        Formato de longitud inválido.
                    </span>
                </span>
            </div>
  
            <!-- status -->
            <div class="flex flex-col gap-1">
                <select formControlName="status" 
                        class="w-full px-3 py-2 border border-blue-900 rounded-lg text-sm md:text-base">
                    <option *ngFor="let item of statusList" [value]="item.value">{{ item.label }}</option>
                </select>
            </div>
  
            <!-- concept -->
            <div class="flex flex-col gap-1">
                <select formControlName="concept" 
                        class="w-full px-3 py-2 border border-blue-900 rounded-lg text-sm md:text-base">
                    <option value="">Seleccione un concepto</option>
                    <option *ngFor="let item of conceptList" [value]="item.concept">{{ item.concept }}</option>
                </select>
                <span *ngIf="propertyForm.get('concept')?.invalid && (propertyForm.get('concept')?.dirty || propertyForm.get('concept')?.touched)" 
                      class="text-red-500 text-sm">
                    <span *ngIf="propertyForm.get('concept')?.errors?.['required']">
                        El concepto es requerido.
                    </span>
                </span>
            </div>

            <!-- type -->
            <div class="flex flex-col gap-1">
                <select formControlName="type" 
                        class="w-full px-3 py-2 border border-blue-900 rounded-lg text-sm md:text-base">
                    <option value="">Seleccione un tipo</option>
                    <option *ngFor="let item of typeList" [value]="item.type">{{ item.type }}</option>
                </select>
                <span *ngIf="propertyForm.get('type')?.invalid && (propertyForm.get('type')?.dirty || propertyForm.get('type')?.touched)" 
                      class="text-red-500 text-sm">
                    <span *ngIf="propertyForm.get('type')?.errors?.['required']">
                        El tipo es requerido.
                    </span>
                </span>
            </div>
  
            <!-- description -->
            <div class="md:col-span-3 flex flex-col gap-1">
                <textarea 
                    formControlName="description" 
                    placeholder="Descripción"
                    minlength="200"
                    maxlength="250"
                    rows="4"
                    class="w-full px-3 py-2 border border-blue-900 rounded-lg text-sm md:text-base outline-none" 
                ></textarea>
                <span *ngIf="propertyForm.get('description')?.invalid && (propertyForm.get('description')?.dirty || propertyForm.get('description')?.touched)" 
                      class="text-red-500 text-sm">
                    <span *ngIf="propertyForm.get('description')?.errors?.['required']">
                        La descripción es requerida.
                    </span>
                    <span *ngIf="propertyForm.get('description')?.errors?.['minlength']">
                        La descripción debe tener al menos 200 caracteres.
                    </span>
                    <span *ngIf="propertyForm.get('description')?.errors?.['maxlength']">
                        La descripción no debe exceder los 250 caracteres.
                    </span>
                </span>
            </div>
  
            <!-- amenities -->
            <div class="md:col-span-3">
                <h2 class="mb-4 font-bold">Comodidades</h2>
                <div class="grid grid-cols-2 md:grid-cols-3 gap-3">
                    <div class="form-check" *ngFor="let item of amenitiesList">
                        <input class="form-check-input" 
                               type="checkbox" 
                               [value]="item.amenity" 
                               (change)="onAmenityChange($event, item.amenity)" 
                               [checked]="isAmenitySelected(item.amenity)" 
                               [id]="'amenity-' + item.id">
                        <label class="form-check-label ml-2" [for]="'amenity-' + item.id">{{ item.amenity }}</label>
                    </div>
                </div>
            </div>
  
            <!-- submit button -->
            <div class="md:col-span-3 text-center mt-4">
                <button type="submit" 
                        class="bg-blue-200 hover:bg-blue-300 rounded-md font-bold px-3 py-2 focus:outline-none cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed" 
                        [disabled]="propertyForm.invalid">
                    Guardar Cambios
                </button>
            </div>
        </div>
    </form>
</div>